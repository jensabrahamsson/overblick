{% extends "base.html" %}

{% block title %}Skuggspel{% endblock %}

{% block content %}
{# ── A. Atmospheric Header ── #}
<div class="skuggspel-header">
    <h1>Skuggspel</h1>
    <p class="page-subtitle">Shadow-self content — the repressed side of each identity</p>
    <p class="text-muted">Exploring the unconscious through Jungian shadow work. Each identity confronts what it denies.</p>
</div>

{# ── B. Shadow Card Grid ── #}
{% if posts %}
<div class="detail-grid">
    {% for post in posts %}
    <article class="shadow-card" aria-labelledby="shadow-title-{{ loop.index }}">
        <div class="shadow-card-header">
            <div>
                <h2 id="shadow-title-{{ loop.index }}">
                    Shadow of {{ post.display_name or post.identity_name }}
                </h2>
                {% if post.topic %}
                <span class="tag tag-sm tag-psychology">{{ post.topic }}</span>
                {% endif %}
            </div>
            <span class="badge-state badge-state--error">SHADOW</span>
        </div>

        <div class="shadow-content">{{ post.shadow_content }}</div>

        {% if post.shadow_profile %}
        <div class="shadow-meta">
            <div class="shadow-quote">
                <p class="text-muted">{{ post.shadow_profile.shadow_description }}</p>
            </div>
            <div class="info-grid">
                {% if post.shadow_profile.framework %}
                <div class="info-item">
                    <span class="info-label">Framework</span>
                    <span class="info-value">{{ post.shadow_profile.framework }}</span>
                </div>
                {% endif %}
                {% if post.word_count %}
                <div class="info-item">
                    <span class="info-label">Words</span>
                    <span class="info-value">{{ post.word_count }}</span>
                </div>
                {% endif %}
                {% if post.generated_at %}
                <div class="info-item">
                    <span class="info-label">Generated</span>
                    <span class="info-value">{{ post.generated_at|epoch_to_datetime }}</span>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </article>
    {% endfor %}
</div>

{% else %}
{# ── C. Empty State ── #}
<div class="skuggspel-empty">
    <span class="skuggspel-empty-icon" aria-hidden="true">&#127761;</span>
    <h2>No shadow posts generated yet</h2>
    <p class="text-muted">Shadow content is generated on a configurable schedule.<br>
    Each identity will confront its repressed aspects through Jungian shadow work.</p>
</div>
{% endif %}
{% endblock %}
